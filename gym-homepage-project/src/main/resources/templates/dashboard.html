<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/css/header.css">
<link rel="stylesheet" href="/css/footer.css">
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css">
<link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/3301/3301556.png">
<title>짐 케어 개인 PT 신청시스템</title>
</head>
<body>
	<div th:insert="~{header :: header}" class="gympage"></div>
	<main>
		<div class="container p-3 mt-3">
			<div class="analysis mt-5 mb-4 p-5"
				style="background-color: rgb(235, 241, 235);">
				<div class="row row-cols-1 row-cols-md-3 g-4">
					<div class="col">
						<div class="card bg-dark">
							<div class="card-body text-center text-light">
								<h5 style="color: white;">
									<i class="fa fa-folder text-light"></i> 접수중
								</h5>
			</div>					
			
			
			<h2 class="text text-center text-light"
			th:text="${totalAppointments}"></h2>
							</div>
							
						 <div style="text-align: center;">
        
        <div style="margin-top:65px">
     	<span id="clock" style="color:gray; font-size: 50px;">clock</span>
        <span id="apm" style="color:gray; font-size: 20px;"  >ampm</span>
    	</div>
    

    <script>
        var Target = document.getElementById("clock");
        var Target_apm = document.getElementById("apm");
        function clock() {
            var time = new Date();
            var hours = time.getHours();
            var minutes = time.getMinutes();
            var seconds = time.getSeconds();
            var AmPm ="AM";
            if(hours > 12){   
                var AmPm ="PM";
                hours %= 12;
            }

            Target.innerText = 
            `${hours < 10 ? `0${hours}` : hours}:${minutes < 10 ? `0${minutes}` : minutes}:${seconds < 10 ? `0${seconds}` : seconds}`;

            Target_apm.innerText = `${AmPm}`;

        }
        clock();
        setInterval(clock, 1000); // 1초마다 실행
    </script>
						
						</div>
					</div>
					
	<div id="carouselExampleSlidesOnly" class="carousel slide carousel-fade" data-bs-ride="carousel">
  <div class="carousel-inner" style="height: 300px; width: 800px; overflow: hidden; margin: auto;">
    
    <div class="carousel-item active">
      <img src="https://img.freepik.com/free-vector/gym-training-twitter-header-template_23-2150678510.jpg?semt=ais_incoming&w=740&q=80"
           class="d-block w-100 h-100 object-fit-cover" alt="...">
    </div>

    <div class="carousel-item">
      <img src="https://mblogthumb-phinf.pstatic.net/MjAyNTAxMDhfMjYw/MDAxNzM2MjY1NjU3Mzk2.vyM72kRssMkb_LJKHJS-ekbB-3KDJYxC1JbRcE-hR8cg.GOHXRq3LrMB1KXIo7LpX020Sav-XXvys2-iUiEjiUxog.PNG/image.PNG?type=w800"
           class="d-block w-100 h-100 object-fit-cover" alt="...">
    </div>

    <div class="carousel-item">
      <img src="https://dimg.donga.com/wps/NEWS/IMAGE/2025/07/21/132039643.1.jpg"
           class="d-block w-100 h-100 object-fit-cover" alt="...">
    </div>

  </div>
</div>
		</div>
		</div>
		</div>
		<div>

			<div>
<div class="wrapper">
    <table class="table table-hover table-bordered align-middle text-center">
        <thead class="table-dark">
            <tr>
                <th scope="col" class="col-id">접수 번호</th>
                <th scope="col" class="col-name">고객명</th>
                <th scope="col" class="col-mail">이메일</th>
                <th scope="col" class="col-mobile">전화번호</th>
                <th scope="col" class="col-address">주소</th>		            
                <th scope="col" class="col-teacher">강사명</th>
                <th scope="col" class="col-date">날짜</th>
                <th scope="col" class="col-time">시간대</th>
                <th scope="col" class="col-status">상태</th>
            </tr>
        </thead>

        <!-- 관리자용 -->
        <tbody th:if="${session.loginUser.userEmail == '1@1.com'}">
            <tr th:each="appointment : ${appointments}">
                <td th:text="${appointment.id}"></td>
                <td th:text="${appointment.userName}"></td>
                <td th:text="${appointment.email}"></td>
                <td th:text="${appointment.phone}"></td>
                <td th:text="${appointment.address}"></td>
                <td th:text="${appointment.serviceType}"></td>
                <td th:text="${appointment.appointmentDate}"></td>
                <td th:text="${appointment.appointmentDuration}"></td>
                <td>
                    <span th:if="${appointment.status1 == '완료'}">접수 완료</span>
                    <form th:if="${appointment.status1 != '완료'}" th:action="@{/completeReservation}" method="post" style="margin: 0;">
                        <input type="hidden" name="id" th:value="${appointment.id}" />
                        <button type="submit" class="btn btn-success btn-sm">접수</button>
                    </form>
                </td>
            </tr>
        </tbody>

        <!-- 일반 유저용 -->
        <tbody th:unless="${session.loginUser.userEmail == '1@1.com'}">
            <tr th:each="appointment : ${appointments}" th:if="${appointment.status1 == '완료'}">
                <td th:text="${appointment.id}"></td>
                <td th:text="${appointment.userName}"></td>
                <td th:text="${#strings.substring(appointment.email, 0, 3) + '***@***.com'}"></td>
                <td th:text="${#strings.substring(appointment.phone, 0, 4) + '****'}"></td>
                <td></td>
                <td th:text="${appointment.serviceType}"></td>
                <td th:text="${appointment.appointmentDate}"></td>
                <td th:text="${appointment.appointmentDuration}"></td>
                <td><span class="badge bg-success">접수완료</span></td>
            </tr>
            
             <tr th:each="appointment : ${appointments}" th:unless="${appointment.status1 == '완료'}">
                <td th:text="${appointment.id}"></td>
                <td th:text="${appointment.userName}"></td>
                <td th:text="${#strings.substring(appointment.email, 0, 3) + '***@***.com'}"></td>
                <td th:text="${#strings.substring(appointment.phone,0, 4) + '****'}"></td>
                <td></td>
                <td th:text="${appointment.serviceType}"></td>
                <td th:text="${appointment.appointmentDate}"></td>
                <td th:text="${appointment.appointmentDuration}"></td>
                <td><span>접수중</span></td>
            </tr>
            
            
            
        </tbody>
    </table>
</div>

				<!-- 페이징 네비게이션 추가 -->

				<nav aria-label="Page navigation" style="margin-top: 10px;">
				  <ul class="pagination justify-content-center">
				    <li class="page-item" th:classappend="${currentPage == 1} ? 'disabled'">
				      <a class="page-link" th:href="@{/reservationDashboard.do(page=${currentPage - 1})}" aria-label="Previous">
				        <span aria-hidden="true">&laquo;</span>
				      </a>
				    </li>
				    <li class="page-item" th:each="i : ${#numbers.sequence(1, totalPages)}" th:classappend="${i == currentPage} ? 'active'">
				      <a class="page-link" th:href="@{/reservationDashboard.do(page=${i})}" th:text="${i}">1</a>
				    </li>
				    <li class="page-item" th:classappend="${currentPage == totalPages} ? 'disabled'">
				      <a class="page-link" th:href="@{/reservationDashboard.do(page=${currentPage + 1})}" aria-label="Next">
				        <span aria-hidden="true">&raquo;</span>
				      </a>
				    </li>
				  </ul>
				</nav>
			</div>
		</div>

	</main>
	<div th:insert="~{footer :: footer}"></div>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
</body>
<style>


.object-fit-cover {
    object-fit: cover;
}


.wrapper {
	height: auto;
	min-height: 80%;
	padding-bottom: 100px;
	margin-top: 80px;
}

.table {
    width: 1300px;
    margin: 50px auto;
    text-align: center; 
}

.table > thead {
    border-bottom: 2px solid #212529;
}


.table .col-id{
	width:10%;
}

.table .col-mobile{
	width:20%;
}


.table .col-tag {
    width: 15%; 
}

.table .col-name{
	width:10% 
}

nav, thead {
	background-color: white;
}

.navbar-brand {
	font-weight: bold;
	color: white;
}

.head1, .fa {
	color: rgb(5, 182, 5);
	font-weight: bold;
}

label {
	text-align: left;
	color: black;
	font-weight: 500;
	margin-bottom: 5px;
}

#dashboard_link {
	text-align: center;
	color: rgb(5, 182, 5) !important;
	background-color: white !important;
}

main {
	height: auto;
	min-height: 100%;
	padding-bottom: 100px;
	margin-top: 100px;
}

</style>
</html>