<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="ko">
<head>
<link rel="stylesheet" href="/css/header.css">
<link rel="stylesheet" href="/css/footer.css">
<script src="https://code.jquery.com/jquery-3.7.1.min.js"
	integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo="
	crossorigin="anonymous"></script>
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
	rel="stylesheet">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title></title>
</head>

<body>
	<div th:replace="~{header :: header}" class="gympage"></div>
	<div class="wrapper">
		<div class=container-mobile>
			<H2 class="title-center">게시판</H2>

			<!-- 오류 표시기 -->
			<div th:if="${errorMessage}" class="alert alert-danger container"
				role="alert">
				<span th:text="${errorMessage}"></span>
			</div>
			<!-- 오류 표시기 -->

			<HR>
			<form>
				<table class="table table-hover">
					<thead>
						<tr>
							<th scope="col" class="col-id">번호</th>
							<th scope="col" class="col-name">제목</th>
							<th scope="col" class="col-author">작성자</th>
							<th scope="col" class="col-tag">태그</th>
							<th scope="col" class="col-img">이미지</th>
							<th scope="col" class="col-like">👍</th>
							<th scope="col" class="col-dislike">👎</th>
							<th scope="col" class="col-view">👀</th>

						</tr>
					</thead>
					<tbody>
						<tr th:each="vo : ${data}" th:data-poid="${vo.poId}">
							<td th:text="${vo.poId}"></td>
							<td th:text="${vo.poName}"></td>
							<td><span th:if="${vo.authorName != null}"
								th:text="${vo.authorName}"></span></td>
							<td th:text="${vo.poTag}"></td>

							<td><img th:if="${vo.poImg != null and vo.poImg != ''}"
								th:src="@{'/uploads/' + ${vo.poImg}}"
								style="max-width: 100px; max-height: 100px;"></td>

							<td th:text="${vo.poLike}"></td>
							<td th:text="${vo.poDislike}"></td>
							<td th:text="${vo.poView}"></td>
						</tr>
					</tbody>
				</table>
			</form>

			<form action="postWritePage.do" method="get">
			    <button class="btn btn-primary" type="submit">글 작성</button>
			</form>
			

		</div>
	</div>

	<!-- 페이징 네비게이션 추가 -->
	<nav aria-label="Page navigation" style="margin-top: 10px;">
		<ul class="pagination justify-content-center">
			<li class="page-item"
				th:classappend="${currentPage == 1} ? 'disabled'"><a
				class="page-link"
				th:href="@{/postBoard.do(page=${currentPage - 1})}"
				aria-label="Previous"> <span aria-hidden="true">&laquo;</span>
			</a></li>
			<li class="page-item"
				th:each="i : ${#numbers.sequence(1, totalPages)}"
				th:classappend="${i == currentPage} ? 'active'"><a
				class="page-link" th:href="@{/postBoard.do(page=${i})}"
				th:text="${i}">1</a></li>
			<li class="page-item"
				th:classappend="${currentPage == totalPages} ? 'disabled'"><a
				class="page-link"
				th:href="@{/postBoard.do(page=${currentPage + 1})}"
				aria-label="Next"> <span aria-hidden="true">&raquo;</span>
			</a></li>
		</ul>
	</nav>

	<div th:replace="~{footer :: footer}"></div>
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
<script type="text/javascript">
	const params = new URLSearchParams(window.location.search);
	if(params.get('block') === 'true') {
		alert('해당 작성자가 아닙니다');
	}
	$('tbody tr').on('click', function() {
		let poId = ($(this).data('poid'));
		document.location.href = "post.do?poId=" + poId;
		return;
	});
</script>
<style>
html, body {
	height: 100%
}

.title-center {
	height: 70px;
	display: flex;
	justify-content: center;
	align-items: center;
}

.wrapper {
	height: auto;
	min-height: 100%;
	padding-bottom: 100px;
	margin-top: 100px;
}

footer {
	height: 100px;
	position: relative;
	transform: translateY(-100%);
}

.container {
	text-align: center;
	width: 60%;
	margin: 0 auto;
	padding: 25px;
	border-radius: 10px;
}

form {
	display: flex;
	flex-direction: column;
	justify-content: center;
	align-items: center;
}

input {
	width: 200px;
	height: 30px;
	margin-top: 5px;
}

.table {
	width: 70%;
	margin: 50px auto;
	text-align: center;
}

.table>thead {
	border-bottom: 2px solid #212529;
}

.table .col-name {
	width: 40%;
}

.table .col-author, .table .col-tag {
	width: 15%;
}

.post-string td {

	height: 10px;
	text-align: center;
	vertical-align: middle; 
}

/* 모바일 반응형으로 cotainer 축소시켰던거 다시 늘림 + h1 사이즈 축소 및 버튼 축소*/
@media ( max-width : 768px) {
	.container-mobile {
		width: 90%;
		padding: 20px;
		margin: 0 20px;
	}
}
</style>
</html>
